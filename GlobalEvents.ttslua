local tool = {}
        tool.scaleBag=require("/_libs/bagTools/scaleBags").fromContents
        tool.setBagTexture=require("/_libs/bagTools/setBagTextureFromContents").simulateTokenStack
        tool.ejectInvalidObjs=require("/_libs/bagTools/ejectInvalidObjects").eject

        tool.wait = {}
            tool.wait.dropIntoBox=require("/_libs/waitUtils/waitUtils").dropIntoBox

        tool.findTag = require("/_libs/tagUtils/tagUtils").tagFoundinTagList

local globalVar = {}
        globalVar.scaleBag = require("/MageKnightV3/GlobalVariables").scaleBagData
            --globalVar.scaleBag = require("/MageKnightV3/GlobalVariables").scaleBags
            --globalVar.emptyStackImage = require("/MageKnightV3/GlobalVariables").emptyStackImages

function onLoad(save_state)
end

--------------------------------------------------------------------------------
--- onObjectEnter : CONTAINER --------------------------------------------------
local runExitBag = true
function processBagScaler(bag, objData)
    runExitBag = false
        local bagTag = bag.getTags()
        for t,v in pairs(globalVar.scaleBag) do
            local tag = 'eventID_'..t
            if bag.hasTag(tag) and tool.findTag(objData.Tags, tag) then
                local value = globalVar.scaleBag[t]
                --tool.scaleBag(bag, tags, 3.5, true) -- true means move UP
                tool.setBagTexture(bag, value)
            end
        end
    runExitBag = true
end

--[[
local bagTag = bag.getTags()
end
end

]]

function onObjectEnterContainer(bag, obj)
    if bag.hasTag('event_BagScale') then
        tool.wait.dropIntoBox(bag, obj, processBagScaler, time)
    end
end
function onObjectLeaveContainer(bag, obj)
    if runExitBag then
        if bag.hasTag('event_BagScale') then
            tool.wait.dropIntoBox(bag, obj, processBagScaler, time)
        end
    end
end
--[[
for key, tags in pairs(globalVar.scaleBag) do
--print(bag.getBounds().size.y)

--- Map Draw Bag
if bag.hasTag(key) and string.lower(key) == string.lower("maptile_DrawBag") then
    if string.lower(eventType) == string.lower('enter') then
        tool.ejectInvalidObjs(bag, tags)
    end
    tool.scaleBag(bag, tags, 3.5, true) -- true means move UP
    tool.setBagTexture(bag, globalVar.emptyStackImage[key])

--- Player Command Token Pile
elseif bag.hasTag(key) and string.lower(key) == string.lower("player_CommandToken") then
    tool.scaleBag(bag, tags, 1.5)
    tool.setBagTexture(bag, globalVar.emptyStackImage[key])
end
end
]]
